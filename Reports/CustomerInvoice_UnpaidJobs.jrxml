<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="CustomerInvoice (Unpaid Jobs List)" language="groovy" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="6f86ab71-d56b-475f-a774-7ea83e614f3c">
	<property name="ireport.zoom" value="1.7715610000000017"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="INVOICE_NO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[SELECT code, specialInstructions, price, discountRate FROM jobs INNER JOIN invoice ON invoice.invoiceNo = jobs.invoiceNo WHERE invoice.invoiceNo = $P{INVOICE_NO} AND invoice.isPaid = 0]]>
	</queryString>
	<field name="code" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="specialInstructions" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="price" class="java.math.BigDecimal">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="discountRate" class="java.lang.Float">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<variable name="invoice_subTotal" class="java.lang.Double" calculation="Sum">
		<variableExpression><![CDATA[$F{price}]]></variableExpression>
	</variable>
	<variable name="invoice_subTotalDiscounted" class="java.lang.Double">
		<variableExpression><![CDATA[$V{invoice_subTotal} - ($V{invoice_subTotal} * $F{discountRate} / 100)]]></variableExpression>
	</variable>
	<variable name="invoice_totalPayable" class="java.lang.Double">
		<variableExpression><![CDATA[$V{invoice_subTotalDiscounted} + ($V{invoice_subTotalDiscounted} * 0.20)]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="28" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="100" height="28" uuid="7eec2cef-ce8a-42dc-9c43-e575634abf36"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Code]]></text>
			</staticText>
			<staticText>
				<reportElement x="100" y="0" width="355" height="28" uuid="e178fe54-92a4-49d0-8604-fa08d156782b"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Job Description]]></text>
			</staticText>
			<staticText>
				<reportElement x="455" y="0" width="100" height="28" uuid="36b1607f-647b-4c48-a9ad-5ba7eda17210"/>
				<textElement textAlignment="Right" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Price]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="100" height="20" uuid="1a67e3ac-8733-4c0a-8918-61e934125e49"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{code}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="100" y="0" width="355" height="20" uuid="f86db4d6-f428-43e2-835c-aa3a09de9f6e"/>
				<textElement verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{specialInstructions}]]></textFieldExpression>
			</textField>
			<textField pattern="£ #,##0.00">
				<reportElement x="455" y="0" width="100" height="20" uuid="4f0ffc1c-faea-4c72-8f05-a591585762f9"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{price}]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="114" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="34" width="147" height="20" uuid="ce5e24b1-de1a-4dcf-a936-fc14eeae8a98"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Sub-Total]]></text>
			</staticText>
			<textField pattern="£ #,##0.00">
				<reportElement x="147" y="34" width="408" height="20" uuid="ce9b25ac-21ab-4b95-a712-c26684de79f7"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{invoice_subTotal}]]></textFieldExpression>
			</textField>
			<staticText>
				<reportElement x="0" y="54" width="147" height="20" uuid="1317c2d8-6c7e-4caa-bd41-50904f97ddcb"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Discount Agreed]]></text>
			</staticText>
			<staticText>
				<reportElement x="0" y="94" width="147" height="20" uuid="99bee295-5f6c-4b9e-98fb-b2db652b0900"/>
				<textElement verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total payable (VAT at 20%)]]></text>
			</staticText>
			<textField pattern="#,##0.00 %">
				<reportElement x="147" y="54" width="408" height="20" uuid="c88bd787-c3a2-4682-8b72-a9d93fc43ae7"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{discountRate}]]></textFieldExpression>
			</textField>
			<textField pattern="£ #,##0.00">
				<reportElement x="147" y="74" width="408" height="20" uuid="12d857b3-753d-440b-b08d-5c8e0ebb9a89"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{invoice_subTotalDiscounted}]]></textFieldExpression>
			</textField>
			<textField pattern="£ #,##0.00">
				<reportElement x="147" y="94" width="408" height="20" uuid="d0de706a-8ad7-4be7-b1ef-182bfbeb3f08"/>
				<textElement textAlignment="Right" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{invoice_totalPayable}]]></textFieldExpression>
			</textField>
			<line>
				<reportElement x="0" y="21" width="555" height="1" uuid="f92d736a-5eeb-493d-84ff-239901202734"/>
				<graphicElement>
					<pen lineWidth="0.25"/>
				</graphicElement>
			</line>
		</band>
	</summary>
</jasperReport>
