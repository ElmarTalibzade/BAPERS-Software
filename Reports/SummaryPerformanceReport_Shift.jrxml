<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SummaryPerformanceReport_Shift" pageWidth="555" pageHeight="802" columnWidth="555" leftMargin="0" rightMargin="0" topMargin="0" bottomMargin="0" uuid="d85e2404-c1ad-4fda-aee3-efc41be5ce58">
	<property name="ireport.zoom" value="1.6105100000000008"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<parameter name="DATE_START" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="DATE_END" class="java.util.Date">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="TIME_START" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="TIME_END" class="java.lang.String">
		<defaultValueExpression><![CDATA[]]></defaultValueExpression>
	</parameter>
	<parameter name="SHIFT_NAME" class="java.lang.String"/>
	<queryString>
		<![CDATA[SELECT 
date_format(tasks.startTime, '%d/%m/%Y') as `date`,
sum(if(tasks.department = '1', timestampdiff(MINUTE, tasks.startTime, tasks.endTime), 0)) as `copyRoom`,
sum(if(tasks.department = '2', timestampdiff(MINUTE, tasks.startTime, tasks.endTime), 0)) as `development`,
sum(if(tasks.department = '3', timestampdiff(MINUTE, tasks.startTime, tasks.endTime), 0)) as `finishing`,
sum(if(tasks.department = '4', timestampdiff(MINUTE, tasks.startTime, tasks.endTime), 0)) as `packing`
FROM tasks
WHERE time(tasks.startTime) BETWEEN date($P{DATE_START}) AND date($P{DATE_END})
AND time(tasks.startTime) BETWEEN time($P{TIME_START}) AND time($P{TIME_END})
GROUP BY date_format(tasks.startTime, '%d/%m/%Y')]]>
	</queryString>
	<field name="date" class="java.lang.String">
		<fieldDescription><![CDATA[]]></fieldDescription>
	</field>
	<field name="copyRoom" class="java.lang.Long"/>
	<field name="development" class="java.lang.Long"/>
	<field name="finishing" class="java.lang.Long"/>
	<field name="packing" class="java.lang.Long"/>
	<variable name="total_copyRoom" class="java.lang.String" calculation="Sum">
		<variableExpression><![CDATA[$F{copyRoom}]]></variableExpression>
	</variable>
	<variable name="total_development" class="java.lang.String" calculation="Sum">
		<variableExpression><![CDATA[$F{development}]]></variableExpression>
	</variable>
	<variable name="total_finishing" class="java.lang.String" calculation="Sum">
		<variableExpression><![CDATA[$F{finishing}]]></variableExpression>
	</variable>
	<variable name="total_packing" class="java.lang.String" calculation="Sum">
		<variableExpression><![CDATA[$F{packing}]]></variableExpression>
	</variable>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="31" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="555" height="31" uuid="5c199d3d-5492-4b43-92c2-159e6704739a"/>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font size="10"/>
				</textElement>
				<textFieldExpression><![CDATA[$P{SHIFT_NAME} + " (" + $P{TIME_START} + " - " + $P{TIME_END} + ")"]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="111" height="20" uuid="6350fbc6-5179-440f-abbc-1ef3cc0340fc"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Date]]></text>
			</staticText>
			<staticText>
				<reportElement x="111" y="0" width="111" height="20" uuid="8131611e-0686-4b80-b8c4-35bdfbe5ce91"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Copy Room]]></text>
			</staticText>
			<staticText>
				<reportElement x="222" y="0" width="111" height="20" uuid="180cb83a-f01a-4343-a3e8-aa2e67bf0d0b"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Development]]></text>
			</staticText>
			<staticText>
				<reportElement x="333" y="0" width="111" height="20" uuid="9258dbb9-b4e8-4126-b52f-1f306961a8bb"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Finishing]]></text>
			</staticText>
			<staticText>
				<reportElement x="444" y="0" width="111" height="20" uuid="2f4d244b-c05c-4cd6-8400-5bcbe15d7ebd"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Packing]]></text>
			</staticText>
		</band>
	</columnHeader>
	<detail>
		<band height="20" splitType="Stretch">
			<textField>
				<reportElement x="0" y="0" width="111" height="20" uuid="32f64c7d-a338-44fc-972a-2e1d9b8e69ed"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$F{date}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="111" y="0" width="111" height="20" uuid="621835bd-0850-4661-a43a-46c5c02e027b"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[String.format("%dh %02s min", $F{copyRoom}/60%24, $F{copyRoom}%60)]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="222" y="0" width="111" height="20" uuid="f80c9ef6-56b3-4175-8066-4feb7c242b7c"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[String.format("%dh %02d min", $F{development}/60%24, $F{development}%60)]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="333" y="0" width="111" height="20" uuid="af76c927-f979-4183-a5fa-aaa39d560437"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[String.format("%dh %02d min", $F{finishing}/60%24, $F{finishing}%60)]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="444" y="0" width="111" height="20" uuid="64eca52f-f721-4281-b03a-ad787a3ac725"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[String.format("%dh %02d min", $F{packing}/60%24, $F{packing}%60)]]></textFieldExpression>
			</textField>
		</band>
	</detail>
	<columnFooter>
		<band height="20" splitType="Stretch">
			<staticText>
				<reportElement x="0" y="0" width="111" height="20" uuid="8a57cefd-3f83-4aa5-8ecd-37baeb6e477a"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle">
					<font isBold="true"/>
				</textElement>
				<text><![CDATA[Total]]></text>
			</staticText>
			<textField>
				<reportElement x="111" y="0" width="111" height="20" uuid="771a5480-4b57-475b-9e35-959900917e2e"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{total_copyRoom}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="222" y="0" width="111" height="20" uuid="2f70bbce-0b1d-4882-81ef-de56e84745f3"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{total_development}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="333" y="0" width="111" height="20" uuid="d27de3c1-bc3a-44c0-b071-b08252e4e363"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{total_finishing}]]></textFieldExpression>
			</textField>
			<textField>
				<reportElement x="444" y="0" width="111" height="20" uuid="cf2e20de-671b-47e6-ba39-9d75721de14e"/>
				<box leftPadding="3" rightPadding="3">
					<pen lineWidth="0.25"/>
					<topPen lineWidth="0.25"/>
					<leftPen lineWidth="0.25"/>
					<bottomPen lineWidth="0.25"/>
					<rightPen lineWidth="0.25"/>
				</box>
				<textElement textAlignment="Center" verticalAlignment="Middle"/>
				<textFieldExpression><![CDATA[$V{total_packing}]]></textFieldExpression>
			</textField>
		</band>
	</columnFooter>
	<pageFooter>
		<band splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band splitType="Stretch"/>
	</summary>
</jasperReport>
